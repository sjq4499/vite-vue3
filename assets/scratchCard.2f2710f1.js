import{o as n,l as r,m as h,$ as l,a0 as d,O as u,S as f,Y as m,Z as p}from"./vendor.01fc63fb.js";import{_ as v}from"./index.40b8f967.js";const _={name:"scratchCard",data(){return{c1:"",ctx:"",ismousedown:!1,fontem:"",isScratch:!1,showPrize:!1}},mounted(){this.fontem=parseInt(window.getComputedStyle(document.documentElement,null)["font-size"]),this.c1=document.getElementById("c1"),this.c1.width=this.c1.clientWidth+15,this.c1.height=this.c1.clientHeight,this.ctx=this.c1.getContext("2d"),this.initCanvas()},methods:{initCanvas(){this.ctx.globalCompositeOperation="source-over",this.ctx.fillStyle="#e5e5e5",this.ctx.fillRect(0,0,this.c1.clientWidth,this.c1.clientHeight),this.ctx.fill(),this.ctx.font="Bold 24px Arial",this.ctx.textAlign="center",this.ctx.fillStyle="#a0a0a0",this.ctx.fillText("\u522E\u5F00\u6709\u5956",this.c1.width/2,55),this.ctx.globalCompositeOperation="destination-out"},touchstart(t){t.preventDefault(),this.ismousedown=!0},touchend(t){sessionStorage.setItem("isScratch",!0),t.preventDefault();for(var e=this.ctx.getImageData(0,0,this.c1.width,this.c1.height),c=0,o=3;o<e.data.length;o+=4)e.data[o]==0&&c++;c>=e.data.length/8&&(this.isScratch=!0),this.ismousedown=!1},touchmove(t){if(this.showPrize=!0,t.preventDefault(),this.ismousedown){t.changedTouches&&(t=t.changedTouches[t.changedTouches.length-1]);var e=document.getElementById("top").offsetTop,c=this.c1.offsetLeft,o=this.c1.offsetTop+e,i=(t.clientX+document.body.scrollLeft||t.pageX)-c||0,s=(t.clientY+document.body.scrollTop||t.pageY)-o||0;this.ctx.beginPath(),this.ctx.arc(i,s,this.fontem*.5,0,Math.PI*2,!0),this.ctx.fill()}}}},g=t=>(m("data-v-eeac11f4"),t=t(),p(),t),x={class:"container",id:"top"},w={class:"award_box"},S={key:0,class:"award"},y=g(()=>h("div",{class:"title"},"\u606D\u559C\u60A8\u83B7\u5F97",-1)),C={key:0,class:"bo"};function I(t,e,c,o,i,s){return n(),r("div",x,[h("div",w,[i.showPrize?(n(),r("div",S,[y,h("span",null,l(Math.round(Math.random()*5)==3?"\u4E00\u4EBF\u5143":Math.round(Math.random()*1e7)),1)])):d("",!0),u(h("canvas",{id:"c1",class:"canvas",onTouchmove:e[0]||(e[0]=(...a)=>s.touchmove&&s.touchmove(...a)),onTouchstart:e[1]||(e[1]=(...a)=>s.touchstart&&s.touchstart(...a)),onTouchend:e[2]||(e[2]=(...a)=>s.touchend&&s.touchend(...a))},null,544),[[f,!i.isScratch]])]),i.isScratch?(n(),r("div",C,"\u8BF7\u627E\u5C0F\u6613\u603B\u76D1\u9886\u53D6")):d("",!0)])}var B=v(_,[["render",I],["__scopeId","data-v-eeac11f4"]]);export{B as default};
